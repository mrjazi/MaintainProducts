<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="jakarta.faces.facelets"
      xmlns:f="jakarta.faces.core"
      xmlns:h="jakarta.faces.html"
      xmlns:p="primefaces">
<style>
    .maintainProducts {
        color: #1368aa;
        font-weight: bolder;
        font-family: "Arial Black";
        padding: 10px;
    }

    .card {
        border: solid #ced0da;
        padding: 30px;
        margin: 20px;
    }

    .ui-inputfield {
        margin-left: 150px;
    }

    .radio {
        border: dashed cadetblue;
        margin: 20px;
        border-radius: 10px;
        padding: 10px;
    }

    .rightButton {
        justify-content: flex-end;
        display: flex;
        right: 0;
        bottom: 0;
        margin-bottom: 40px;
        color: #1368aa;
    }

    .clearFilter {
        justify-content: flex-end;
        display: flex;
        right: 0;
        bottom: 0;
        color: #1368aa;
    }

    .table {
        padding: 20px;
    }

    .ui-button {
        color: #1368aa;
    }

    .custom-radio {
        border: 2px dashed #9747ff;
        display: inline-block;
        width: 200px;
        border-radius: 5px;
    }

    .custom-radio .ui-radiobutton-box.ui-state-active {
        background-color: orange !important;
        border-color: orange !important;
    }

    .mr-2 {
        color: #1368aa;
    }

    .ui-selectoneradio.layout-line-direction > div, .ui-selectoneradio.layout-line-direction > div label {
        padding: 10px;
    }

</style>
<h:head>
    <title>Maintain Products</title>
    <h:outputScript name="test.js"/>
    <h:outputStylesheet name="index.css"/>
</h:head>
<h:body>
    <h2 class="maintainProducts">Maintain Products</h2>


    <h:form id="form">
        <p:growl id="msgs" showDetail="true"/>
        <div class="card">
            <h:panelGrid columns="2" cellpadding="10">
                <p:outputLabel for="productId" value="Product ID"/>
                <p:inputText id="productId" value="#{crud.selectedProduct.productId}" required="true"/>

                <p:outputLabel for="productName" value="Product Name"/>
                <p:inputText id="productName" value="#{crud.selectedProduct.productName}" required="true"/>


                <p:outputLabel for="input2" value="Amount"/>
                <p:inputNumber id="input2" value="#{crud.selectedProduct.productAmount}" symbol=" JOD"
                               symbolPosition="s" decimalSeparator="," thousandSeparator="."/>


                <p:outputLabel for="date" value="Date *"/>
                <p:calendar id="date" value="#{crud.selectedProduct.productDate}" pattern="dd/MM/yyyy"
                            navigator="true"/>


                <p:outputLabel for="country" value="Country"/>
                <p:selectOneMenu id="country" value="#{crud.selectedProduct.country}" style="width:200px">
                    <f:selectItem itemLabel="Select Country" itemValue="" noSelectionOption="true"/>
                    <f:selectItems value="#{crud.countries}" var="c" itemLabel="#{c}" itemValue="#{c}"/>
                </p:selectOneMenu>

                <p:outputLabel for="category" value="Category"/>
                <p:selectOneMenu id="category" value="#{crud.selectedProduct.category}" style="width:200px">
                    <f:selectItem itemLabel="Select Category" itemValue="" noSelectionOption="true"/>
                    <f:selectItems value="#{crud.categories}" var="cat" itemLabel="#{cat}" itemValue="#{cat}"/>
                </p:selectOneMenu>

                <p:outputLabel for="quantity" value="Quantity"/>
                <p:inputNumber id="quantity" value="#{crud.selectedProduct.quantity}"/>

                <p:outputLabel for="type" value="Type"/>
                <p:selectOneRadio styleClass="custom-radio" id="type" value="#{crud.selectedProduct.type}"
                                  layout="lineDirection">
                    <f:selectItem itemLabel="New" itemValue="New"/>
                    <f:selectItem itemLabel="Old" itemValue="Old"/>
                </p:selectOneRadio>
            </h:panelGrid>

            <h:panelGrid columns="1">
                <span class="ui-float-label">
                <p:outputLabel value="Description"/>
                <p:panel>
                    <p:outputLabel for="productDescription" value="Product description"/>
                    <p:inputTextarea id="productDescription" value="#{crud.selectedProduct.productDescription}" rows="5"
                                     style="width: 100%; margin-top: 5px; resize: none;" autoResize="true"/>
                </p:panel>
                </span>
            </h:panelGrid>
            <div class="rightButton">
                <p:commandButton value="Add Product" styleClass="mr-2" icon="pi pi-plus" iconPos="right"
                                 action="#{crud.addProduct()}" update="@form"
                                 style="background-color: #1368aa; border-color: #1368aa; border-radius: 7px;"/>
            </div>
        </div>

        <div class="table">
            <p:dataTable id="data-table-products" var="productVar" value="#{crud.products}"
                         paginator="true" rows="5" allowUnsorting="true" sortMode="single" paginatorPosition="bottom">

                <f:facet name="header">
                    <div class="clearFilter" style="color: aqua">
                        <div>
                            <p:commandButton value="Clear filter" process="@this"
                                             style="background-color: white; border-color: #1368aa; border-radius: 7px; color: #1368aa"
                                             icon="pi pi-filter-slash" iconPos="right"
                            />


                        </div>
                    </div>

                </f:facet>
                <p:column headerText="Product ID" sortBy="#{productVar.productId}">
                    <h:outputText value="#{productVar.productId}"/>
                </p:column>

                <p:column headerText="Amount">
                    <h:outputText value="#{productVar.productAmount}">
                        <f:convertNumber currencySymbol=" JOD" type="currency"/>
                    </h:outputText>

                </p:column>
                <p:column headerText="Product Name">
                    <h:outputText value="#{productVar.productName}"/>
                </p:column>
                <p:column headerText="Country">
                    <h:outputText value="#{productVar.country}"/>
                </p:column>
                <p:column headerText="Product Type">
                    <h:outputText value="#{productVar.type}"/>
                </p:column>
                <p:column headerText="Category">
                    <h:outputText value="#{productVar.category}"/>
                </p:column>


                <p:column headerText="Quantity">
                    <h:outputText value="#{productVar.quantity}"/>
                </p:column>
                <p:column headerText="Date">
                    <h:outputText value="#{productVar.productDate}"/>
                </p:column>

                <p:column style="width: 75px; text-align: center">
                    <p:splitButton icon="pi pi-info-circle" styleClass="ui-button-info ui-button-flat">
                        <p:menuitem value="Actions" disabled="true"/>
                        <p:divider/>
                        <p:menuitem value="Edit" icon="pi pi-pencil" process="@this"
                                    update=":dialogs:manage-product-content"
                                    oncomplete="PF('manageProductDialog').show()">
                            <f:setPropertyActionListener value="#{productVar}" target="#{crud.selectedProduct}"/>
                            <p:resetInput target=":dialogs:manage-product-content"/>
                        </p:menuitem>

                        <p:menuitem value="Delete" icon="pi pi-trash"
                                    process="@this"
                                    oncomplete="PF('deleteProductDialog').show()">
                            <f:setPropertyActionListener value="#{productVar}" target="#{crud.selectedProduct}"/>
                        </p:menuitem>


                        <p:menuitem value="View" icon="pi pi-eye"
                                    process="@this"
                                    update=":dialogs:view-product-content"
                                    oncomplete="PF('viewProductDialog').show()">
                            <f:setPropertyActionListener value="#{productVar}" target="#{crud.selectedProduct}"/>
                        </p:menuitem>

                    </p:splitButton>
                </p:column>
            </p:dataTable>
        </div>


        <p:confirmDialog widgetVar="deleteProductDialog" showEffect="fade" width="300"
                         message="Delete the product?" header="Confirm" severity="warn">
            <p:commandButton value="Yes" icon="pi pi-check" actionListener="#{crud.deleteProduct}"
                             process="@this" update="@this"
                             oncomplete="PF('deleteProductDialog').hide()"/>
            <p:commandButton value="No" type="button" styleClass="ui-button-secondary" icon="pi pi-times"
                             onclick="PF('deleteProductDialog').hide()"/>
        </p:confirmDialog>


    </h:form>
    <h:form id="dialogs">

        <p:dialog header="Product Details" showEffect="fade" modal="true" widgetVar="manageProductDialog"
                  responsive="true">

            <p:outputPanel id="manage-product-content" class="ui-fluid">
                <p:outputPanel rendered="#{not empty crud.selectedProduct}">

                    <div class="field">
                        <p:outputLabel for="updateName">Name</p:outputLabel>
                        <p:inputText id="updateName" value="#{crud.selectedProduct.productName}" required="true"/>
                    </div>
                    <br/>

                    <div class="field">
                        <p:outputLabel for="updateId">ID</p:outputLabel>
                        <p:inputTextarea id="updateId" value="#{crud.selectedProduct.productId}"/>
                    </div>


                    <br/>


                    <div class="field">
                        <p:outputLabel for="updateType">Type</p:outputLabel>
                        <p:selectOneRadio styleClass="custom-radio" id="updateType" value="#{crud.selectedProduct.type}"
                                          layout="lineDirection">
                            <f:selectItem itemLabel="New" itemValue="New"/>
                            <f:selectItem itemLabel="Old" itemValue="Old"/>
                        </p:selectOneRadio>
                    </div>


                    <br/>
                    <p:outputLabel for="updateDate" value="Date"/>
                    <p:calendar id="updateDate" value="#{crud.selectedProduct.productDate}" pattern="dd/MM/yyyy"
                                navigator="true" required="true"/>
                    <br/>
                    <br/>

                    <div class="formgrid grid">
                        <div class="field col">
                            <p:outputLabel for="UpdateAmount">Amount</p:outputLabel>
                            <p:inputNumber id="UpdateAmount" value="#{crud.selectedProduct.productAmount}"
                                           symbol=" JOD"
                                           symbolPosition="s" decimalSeparator="." thousandSeparator=","/>
                        </div>

                    </div>
                </p:outputPanel>
            </p:outputPanel>

            <f:facet name="footer">
                <p:commandButton value="Save" icon="pi pi-check" actionListener="#{crud.saveProduct()}"
                                 update="manage-product-content" process="manage-product-content @this"/>
                <p:commandButton value="Cancel" icon="pi pi-times" onclick="PF('manageProductDialog').hide()"
                                 class="ui-button-secondary" type="button"/>
            </f:facet>
        </p:dialog>

        <p:dialog header="View Product" showEffect="fade" modal="true" widgetVar="viewProductDialog"
                  responsive="true">
            <h:panelGrid columns="3" cellpadding="7">
                <p:outputPanel id="view-product-content" class="ui-fluid">
                    <p:outputPanel rendered="#{not empty crud.selectedProduct}">
                        <div class="field">
                            <p:outputLabel for="viewName">Name</p:outputLabel>
                            <p:inputText id="viewName" value="#{crud.selectedProduct.productName}" readonly="true"/>
                        </div>
                        <br/>

                        <div class="field">
                            <p:outputLabel for="viewId">ID</p:outputLabel>
                            <p:inputTextarea id="viewId" value="#{crud.selectedProduct.productId}" readonly="true"/>
                        </div>
                        <br/>

                        <div class="field">
                            <p:outputLabel for="viewType">Type</p:outputLabel>
                            <p:inputText id="viewType" value="#{crud.selectedProduct.type}" readonly="true"/>
                        </div>
                        <br/>

                        <div class="field">
                            <p:outputLabel for="viewDate">Date</p:outputLabel>
                            <p:inputText id="viewDate" value="#{crud.selectedProduct.productDate}" readonly="true" />
                        </div>
                        <br/>

                        <div class="field">
                            <p:outputLabel for="viewAmount">Amount</p:outputLabel>
                            <p:inputText id="viewAmount" value="#{crud.selectedProduct.productAmount}" readonly="true"/>
                        </div>
                        <br/>

                        <div class="field">
                            <p:outputLabel for="viewDescription">Description</p:outputLabel>
                            <p:inputTextarea id="viewDescription" value="#{crud.selectedProduct.productDescription}" readonly="true" rows="5" style="width: 100%; margin-top: 5px; resize: none;" autoResize="true"/>
                        </div>
                    </p:outputPanel>
                </p:outputPanel>

            </h:panelGrid>

            <f:facet name="footer">
                <p:commandButton value="Close" icon="pi pi-times" onclick="PF('viewProductDialog').hide()"
                                 class="ui-button-secondary" type="button"/>
            </f:facet>
        </p:dialog>
    </h:form>

</h:body>
</html>